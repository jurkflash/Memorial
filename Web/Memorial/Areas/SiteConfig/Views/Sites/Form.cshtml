
@{
    ViewBag.Title = "Form";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>New Rental Form</h2>

<form id="form">
    <div class="form-group">
        <label>Name</label>
        <div class="tt-container">
            <input id="name" name="name" required type="text" value="" class="form-control" required />
        </div>
    </div>

    <div class="form-group">
        <label>Code</label>
        <div class="tt-container">
            <input id="code" name="code" data-rule-mustThreeCharacters="true" type="text" value="" class="form-control" required />
        </div>
    </div>

    <div class="form-group">
        <label>Address</label>
        <div class="tt-container">
            <textarea id="address" name="address" type="text" value="" class="form-control"></textarea>
        </div>
    </div>

    <div class="form-group">
        <label>Remark</label>
        <div class="tt-container">
            <textarea id="remark" name="remark" type="text" value="" class="form-control"></textarea>
        </div>
    </div>

    <div class="form-group">
        <label>Header</label>
        <div class="tt-container">
            <textarea id="header" name="header" type="text" value="" class="form-control" required></textarea>
        </div>
    </div>

    <button class="btn btn-primary">@Html.Raw(Resources.Mix.Save)</button>
</form>
@section scripts
{
    @Scripts.Render("~/bundles/jqueryval")
    <script>$(document).ready(function () {

            $.validator.addMethod("mustThreeCharacters", function (value, element, arg) {
                if (value.length != 3)
                    return false;
                return true;
            }, "Must 3 characters");

            var validator = $("#form").validate({

                submitHandler: function () {

                    var vm = {
                        name: $("#name").val(),
                        code: $("#code").val(),
                        address: $("#address").val(),
                        remark: $("#remark").val(),
                        header: $("#header").val()
                    };

                    $.ajax({
                        url: "/api/ConfigSites",
                        method: "post",
                        data: vm
                    })
                    .done(function (data) {
                        toastr.success(MEMORIAL_SUCCESS);

                        window.location.href = window.location.href + '/' + data;
                    })
                    .fail(function () {
                        toastr.error(MEMORIAL_UNEXPECTED_HAPPENED);
                    });

                    return false;
                }
            });
        });</script>
}


